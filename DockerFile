# Dockerfile

# 1. เลือก Python base image ที่ต้องการ
FROM python:3.10-slim-buster 
# python:3.10-slim-buster เป็น image ที่มีขนาดเล็กและมี Python 3.10 ติดตั้งไว้

# 2. ตั้งค่า Working Directory ภายใน container
WORKDIR /app

# 3. คัดลอกไฟล์ requirements.txt (ถ้ามี) เพื่อติดตั้ง dependencies ก่อน
# การทำเช่นนี้ช่วยให้ Docker cache layer นี้ได้ หาก requirements ไม่เปลี่ยนแปลง
COPY requirements.txt ./

# 4. ติดตั้ง Python dependencies
# ตรวจสอบให้แน่ใจว่าคุณมีไฟล์ requirements.txt ที่ระบุ libraries ที่จำเป็น
# เช่น discord.py, python-dotenv, yt-dlp, PyNaCl
RUN pip install --no-cache-dir -r requirements.txt

# 5. คัดลอกไฟล์โค้ดทั้งหมดของโปรเจกต์เข้าไปใน WORKDIR (/app)
COPY . .

# 6. (ถ้าจำเป็น) ติดตั้ง FFmpeg สำหรับ Music Bot
# RUN apt-get update && apt-get install -y ffmpeg

# 7. คำสั่งที่จะรันเมื่อ container เริ่มทำงาน
# แทนที่ main_bot.py ด้วยชื่อไฟล์ Python หลักของบอทคุณ
CMD ["python", "main_bot.py"]